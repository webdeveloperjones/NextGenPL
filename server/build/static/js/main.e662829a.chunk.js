(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{28:function(e,t,a){e.exports=a(57)},56:function(e,t,a){},57:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),c=a(0),l=a.n(c),s=a(7),o=a(3),i=a(4),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ENTRIES":return Object(i.a)(t.data);case"ADD_ENTRY":return[t.data].concat(Object(i.a)(e));default:return e}},u=Object(s.b)({entries:m}),d=a(6),g=function(){return l.a.createElement("header",{id:"header"},l.a.createElement("div",{className:"header--title"},"ProperLife"))},f=a(2),p=a.n(f),b=a(5),E=a(26),h=a(14),v=a.n(h),w=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Getting Weights..."),e.next=3,v.a.get("/api/daily");case 3:return t=e.sent,console.log("Success"),e.abrupt("return",t.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Posting record: ",t),e.next=3,v.a.post("/api/daily",t,{headers:{Accept:"multipart/form-data","Content-Type":"multipart/form-data"}});case 3:return a=e.sent,console.log("Success"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.label,a=e.selected,n=e.setTimeFrame,r=e.timeFrame,c=a?"main--chart--buttons--btn selected":"main--chart--buttons--btn";return l.a.createElement("button",{onClick:function(e){for(var t=document.getElementsByClassName("main--chart--buttons--btn"),a=0;a<t.length;++a)t[a].classList.contains("selected")&&(t[a].classList.toggle("selected"),t[a].classList.toggle("closed"));var c=e.currentTarget;c.classList.contains("closed")&&c.classList.toggle("closed"),c.classList.toggle("selected");var l=new Date;l.setDate(l.getDate()-r),n(l)},className:c},l.a.createElement("span",null,t))},j=function(){var e=Object(o.c)((function(e){return e.entries}));return l.a.createElement("section",{id:"main--table"},l.a.createElement("div",{className:"main--table--row"},l.a.createElement("div",{className:"main--table--row--header"},"Weight"),l.a.createElement("div",{className:"main--table--row--header"},"Date"),l.a.createElement("div",{className:"main--table--row--header"},"Image")),!!e.length&&e.sort((function(e,t){return e.Date-t.Date})).map((function(e){var t=new Date(e.Date);return l.a.createElement("div",{key:e.Date,className:"main--table--row"},l.a.createElement("div",{className:"main--table--row--field main--table--row--weight"},l.a.createElement("span",null,e.Weight)),l.a.createElement("div",{className:"main--table--row--field main--table--row--date"},l.a.createElement("span",null,t.toLocaleDateString())),l.a.createElement("div",{className:"main--table--row--field main--table--row--image"},!!(e.s3url&&e.s3url.length>0)&&l.a.createElement("a",{href:e.s3url,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:"/images/cameraIcon.svg",alt:"Camera Icon"}))))})))},y=function(){var e=Object(o.b)(),t=new Date;t.setDate(t.getDate()-7);var a=Object(c.useState)(t),n=Object(d.a)(a,2),r=n[0],s=n[1];Object(c.useEffect)((function(){(function(){var t=Object(b.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w();case 2:(a=t.sent)?e({type:"SET_ENTRIES",data:Object(i.a)(a)}):alert("Error loading data, first refresh then reach out to tech.");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]);var m=Object(o.c)((function(e){return e.entries}));return m.length?l.a.createElement("main",{id:"main",className:"container"},l.a.createElement("div",{id:"main--chart"},l.a.createElement(E.a,{width:"100%",id:"weightChart",chartType:"LineChart",loader:l.a.createElement("div",null,"Loading Chart"),rows:Object(i.a)(m.sort((function(e,t){return e.Date-t.Date})).map((function(e){return[new Date(e.Date),e.Weight]}))),columns:[{type:"date",label:"Date"},{type:"number",label:"Weight"}],options:{curveType:"function",legend:{position:"none"},hAxis:{format:"MM/dd",viewWindow:{min:r}},vAxis:{viewWindowMode:"pretty"},colors:["#025C93"],pointsVisible:!0}})),l.a.createElement("div",{className:"main--chart--buttons"},l.a.createElement(D,{timeFrame:7,setTimeFrame:s,label:"Week",selected:!0}),l.a.createElement(D,{timeFrame:30,setTimeFrame:s,label:"Month"}),l.a.createElement(D,{timeFrame:90,setTimeFrame:s,label:"3 Months"})),l.a.createElement(j,null)):l.a.createElement("main",{id:"main",className:"container"})},O=function(e){var t=e.show;return l.a.createElement("button",{onClick:function(e){var a=document.getElementById("addButton");a.classList.contains("open")?(a.classList.toggle("open"),t(0)):(a.classList.toggle("open"),t(1))},id:"addButton"})},L=function(e){var t=e.show,a=Object(c.useState)(""),n=Object(d.a)(a,2),r=n[0],s=n[1],m=Object(c.useState)([]),u=Object(d.a)(m,2),g=u[0],f=u[1],E=Object(o.b)(),h=function(){var e=Object(b.a)(p.a.mark((function e(a){var n,c,l,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),n=document.getElementById("addForm--form--button"),!Number(r)>0&&(c=document.getElementsByClassName("field-weight")[0],console.log(c),c.classList.contains("error")||c.classList.toggle("error")),(l=new FormData).append("weight",Number(r)),g.length&&l.append("file",g[0]),n.innerText="Uploading...",n.classList.toggle("uploading"),e.next=10,N(l);case 10:if(201===(o=e.sent).status){e.next=14;break}return alert("error of some kind"),e.abrupt("return");case 14:E({type:"ADD_ENTRY",data:o.data}),console.log(o),n.innerText="Done!",n.classList.toggle("uploading"),n.classList.toggle("done"),setTimeout((function(){n.classList.toggle("done"),n.innerText="Upload"}),3e3),s(""),f([]),document.getElementById("addButton").classList.toggle("open"),t(0);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement("div",{id:"addForm",className:"container"},l.a.createElement("div",{className:"addForm--wrapper"},l.a.createElement("form",{id:"addForm--form"},l.a.createElement("div",{className:"addForm--form--field field-weight"},l.a.createElement("label",null,l.a.createElement("span",null,"Weight - lbs:"),l.a.createElement("span",{className:"required"},"*required")),l.a.createElement("input",{type:"number",step:"0.2",value:r,onChange:function(e){return s(e.currentTarget.value)}})),l.a.createElement("div",{className:"addForm--form--field field-image"},l.a.createElement("label",null,"Image:"),l.a.createElement("input",{type:"file",id:"file-upload",onChange:function(e){return f(Object(i.a)(e.target.files))}})),l.a.createElement("button",{id:"addForm--form--button",onClick:h},"Upload"))))};var T=function(){var e=Object(c.useState)(0),t=Object(d.a)(e,2),a=t[0],n=t[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(g,null),l.a.createElement(O,{show:n}),!!a&&l.a.createElement(L,{show:n}),l.a.createElement(y,null))},F=(a(56),Object(s.c)(u));F.subscribe((function(){return console.log("Store: ",F.getState())})),console.log(F.getState()),r.a.render(l.a.createElement(o.a,{store:F},l.a.createElement(T,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.e662829a.chunk.js.map